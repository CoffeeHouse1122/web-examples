<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é€Ÿåº¦å¯æ§çš„æ‰“å­—æœºæ•ˆæœ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      color: #fff;
      font-family: 'Courier New', Courier, monospace;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      text-align: center;
      padding: 2rem;
      max-width: 800px;
    }

    h1 {
      font-size: 2.4rem;
      margin-bottom: 2rem;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
    }

    .typewriter {
      font-size: 2rem;
      line-height: 1.4;
      margin: 1rem auto;
      min-height: 3em;
    }

    /* å…‰æ ‡æ ·å¼ */
    .cursor {
      display: inline-block;
      width: 2px;
      height: 2.2rem;
      background: #fff;
      vertical-align: middle;
      margin-left: 4px;
      animation: blink 1s infinite;
    }

    /* å…‰æ ‡åŠ¨ç”» */
    @keyframes blink {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0;
      }
    }

    .controls {
      margin-top: 2rem;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .controls .btn {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.15);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .controls .btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .speed-display {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-top: 1rem;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>æ‰“å­—æœºæ•ˆæœæ¼”ç¤º</h1>
    <div class="typewriter" id="typewriter">
    </div>
    <div class="speed-display" id="speedDisplay">æ‰“å­—é€Ÿåº¦ï¼š100ms/å­—</div>
    <div class="controls">
      <button class="btn" id="startBtn">å¼€å§‹</button>
      <button class="btn" id="pauseBtn">æš‚åœ</button>
      <button class="btn" id="resetBtn">é‡ç½®</button>
      <button class="btn" id="fasterBtn">åŠ å¿«</button>
      <button class="btn" id="slowerBtn">å‡æ…¢</button>
    </div>
  </div>
  <script>
    // é…ç½®æ‰“å­—æ–‡æœ¬
    const texts = [
      "æ¬¢è¿æ¥åˆ°å‰ç«¯ä¸–ç•Œï¼",
      "HTML + CSS + JavaScript = æ— é™å¯èƒ½",
      "æ¯å¤©ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œè¿›æ­¥çœ‹å¾—è§ğŸ’¡",
      "ä½ ä¹Ÿå¯ä»¥æˆä¸ºå‰ç«¯é«˜æ‰‹ï¼"
    ];

    let currentTextIndex = 0; //å½“å‰æ˜¾ç¤ºæ–‡æœ¬åœ¨æ–‡æœ¬æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®
    let currentCharIndex = 0; //å½“å‰æ˜¾ç¤ºå­—ç¬¦åœ¨å½“å‰æ–‡æœ¬ä¸­çš„ç´¢å¼•ä½ç½®
    let isDeleting = false;   //æ ‡è¯†å½“å‰æ˜¯å¦å¤„äºåˆ é™¤å­—ç¬¦çš„çŠ¶æ€
    let isPaused = false;     //æ ‡è¯†æ‰“å­—æœºæ•ˆæœæ˜¯å¦å¤„äºæš‚åœçŠ¶æ€
    let typingSpeed = 100;    //æ‰“å­—é€Ÿåº¦ï¼Œå•ä½ä¸ºæ¯«ç§’/å­—ç¬¦
    let deletingSpeed = 50;   //åˆ é™¤é€Ÿåº¦ï¼Œå•ä½ä¸ºæ¯«ç§’/å­—ç¬¦

    const typewriterEl = document.getElementById('typewriter');
    const speedDisplay = document.getElementById('speedDisplay');

    let timeoutId = null;

    // æ‰“å­—å‡½æ•°
    function type() {
      if (isPaused) return;

      const currentText = texts[currentTextIndex];

      if (!isDeleting) {
        // æ‰“å­—é˜¶æ®µï¼šé€å­—æ˜¾ç¤º
        typewriterEl.textContent = currentText.substring(0, currentCharIndex + 1);
        currentCharIndex++;

        if (currentCharIndex === currentText.length) {
          // æ‰“å®Œååœé¡¿ï¼Œç„¶åå¼€å§‹åˆ é™¤
          isDeleting = true;
          timeoutId = setTimeout(type, 1500); //åœé¡¿1.5ç§’
          return;
        }
      } else {
        // åˆ é™¤é˜¶æ®µï¼šé€å­—åˆ é™¤
        typewriterEl.textContent = currentText.substring(0, currentCharIndex - 1);
        currentCharIndex--;
        if (currentCharIndex === 0) {
          // åˆ é™¤å®Œæ¯•ï¼Œåˆ‡æ¢ä¸‹ä¸€å¥
          isDeleting = false;
          currentTextIndex = (currentTextIndex + 1) % texts.length;
        }
      }
      // è®¡ç®—ä¸‹ä¸€æ¬¡å»¶è¿Ÿ
      const delay = isDeleting ? deletingSpeed : typingSpeed;
      timeoutId = setTimeout(type, delay);
    }

    // æ§åˆ¶å‡½æ•°
    // å¼€å§‹æ‰“å­—
    function startTyping() {
      if (timeoutId || isPaused) {
        isPaused = false;
        if (!timeoutId) type(); //å¦‚æœè¢«æš‚åœè¿‡ï¼Œé‡æ–°å¯åŠ¨
      } else {
        type();
      }
    }

    // æš‚åœæ‰“å­—
    function pauseTyping() {
      isPaused = true;
      if (timeoutId) {
        clearTimeout(timeoutId);
        timeoutId = null;
      }
    }

    // é‡ç½®æ‰“å­—
    function resetTyping() {
      if (timeoutId) {
        clearTimeout(timeoutId);
        timeoutId = null;
      }
      isPaused = false;
      isDeleting = false;
      currentTextIndex = 0;
      currentCharIndex = 0;
      typewriterEl.textContent = '';
      startTyping();
    }

    // è°ƒæ•´æ‰“å­—é€Ÿåº¦
    function adjustSpeed(delta) {
      typingSpeed = Math.max(20, Math.min(300, typingSpeed + delta));
      speedDisplay.textContent = `æ‰“å­—é€Ÿåº¦ï¼š${typingSpeed}ms/å­—`;
    }

    // ç»‘å®šæŒ‰é’®äº‹ä»¶
    document.getElementById('startBtn').addEventListener('click', startTyping);
    document.getElementById('pauseBtn').addEventListener('click', pauseTyping);
    document.getElementById('resetBtn').addEventListener('click', resetTyping);
    document.getElementById('fasterBtn').addEventListener('click', () => adjustSpeed(-20));
    document.getElementById('slowerBtn').addEventListener('click', () => adjustSpeed(20));

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å¼€å§‹
    window.addEventListener('load', () => {
      startTyping();
    });

    // æ·»åŠ å…‰æ ‡ï¼ˆç”¨JSåŠ¨æ€æ’å…¥ï¼Œé¿å…åˆå§‹æ˜¾ç¤ºï¼‰
    const observer = new MutationObserver(() => {
      // ç¡®ä¿å…‰æ ‡å§‹ç»ˆåœ¨æœ€å
      if (!document.querySelector('.cursor')) {
        const cursor = document.createElement('span');
        cursor.className = 'cursor';
        typewriterEl.appendChild(cursor);
      }
    });
    // å¯åŠ¨MutationObserverè§‚å¯Ÿå™¨ï¼Œç”¨äºç›‘å¬æ‰“å­—æœºå…ƒç´ çš„DOMå˜åŒ–ï¼ŒåŒ…æ‹¬å­å…ƒç´ çš„æ·»åŠ ã€åˆ é™¤ç­‰æ“ä½œ
    observer.observe(typewriterEl, { childList: true, subtree: true });
  </script>
</body>

</html>